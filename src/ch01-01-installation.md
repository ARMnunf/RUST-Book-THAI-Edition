## การติดตั้ง

ขั้นตอนแรกคือการติดตั้ง Rust เราจะดาวน์โหลด Rust ผ่าน `rustup` 
ซึ่งเป็นเครื่องมือบรรทัดคำสั่งสำหรับจัดการเวอร์ชันของ Rust และเครื่องมือที่เกี่ยวข้อง 
คุณจะต้องมีการเชื่อมต่ออินเทอร์เน็ตสำหรับการดาวน์โหลด

> หมายเหตุ: หากคุณไม่ต้องการใช้ `rustup` ด้วยเหตุผลบางประการ 
> โปรดดูที่ [หน้าวิธีการติดตั้ง Rust แบบอื่น][otherinstall] สำหรับตัวเลือกเพิ่มเติม

ขั้นตอนต่อไปนี้จะติดตั้งเวอร์ชันเสถียรล่าสุดของคอมไพเลอร์ Rust 
การรับประกันความเสถียรของ Rust ทำให้มั่นใจได้ว่าตัวอย่างทั้งหมดในหนังสือที่คอมไพล์ได้
จะยังคงคอมไพล์ได้กับเวอร์ชัน Rust ที่ใหม่กว่า 
ผลลัพธ์อาจแตกต่างกันเล็กน้อยระหว่างเวอร์ชัน เนื่องจาก Rust มักปรับปรุงข้อความแสดงข้อผิดพลาดและคำเตือนให้ดีขึ้น 
กล่าวอีกนัยหนึ่ง เวอร์ชันเสถียรใหม่ๆ ของ Rust ที่คุณติดตั้งโดยใช้ขั้นตอนเหล่านี้ควรทำงานได้ตามที่คาดหวัง
กับเนื้อหาของหนังสือเล่มนี้

> ### สัญลักษณ์บรรทัดคำสั่ง
>
> ในบทนี้และตลอดทั้งเล่ม เราจะแสดงคำสั่งบางอย่างที่ใช้ในเทอร์มินัล 
> บรรทัดที่คุณควรป้อนในเทอร์มินัลทั้งหมดจะขึ้นต้นด้วย `$` 
> คุณไม่จำเป็นต้องพิมพ์อักขระ `$` มันเป็นพร็อมต์บรรทัดคำสั่งที่แสดงเพื่อบ่งบอกจุดเริ่มต้นของแต่ละคำสั่ง 
> บรรทัดที่ไม่ขึ้นต้นด้วย `$` โดยทั่วไปจะแสดงผลลัพธ์ของคำสั่งก่อนหน้า 
> นอกจากนี้ ตัวอย่างเฉพาะ PowerShell จะใช้ `>` แทน `$`

### การติดตั้ง `rustup` บน Linux หรือ macOS

หากคุณใช้ Linux หรือ macOS ให้เปิดเทอร์มินัลและป้อนคำสั่งต่อไปนี้:

```console
$ curl --proto '=https' --tlsv1.2 https://sh.rustup.rs -sSf | sh
```

คำสั่งนี้จะดาวน์โหลดสคริปต์และเริ่มการติดตั้งเครื่องมือ `rustup` 
ซึ่งจะติดตั้ง Rust เวอร์ชันเสถียรล่าสุด 
คุณอาจถูกขอให้ป้อนรหัสผ่าน หากการติดตั้งสำเร็จ จะปรากฏบรรทัดต่อไปนี้:

```text
Rust is installed now. Great!
```

คุณยังต้องการ *linker* ซึ่งเป็นโปรแกรมที่ Rust ใช้เพื่อรวมผลลัพธ์ที่คอมไพล์แล้วให้เป็นไฟล์เดียว มีแนวโน้มว่าคุณมีอยู่แล้ว 
หากคุณได้รับข้อผิดพลาดเกี่ยวกับ linker คุณควรติดตั้งคอมไพเลอร์ภาษา C ซึ่งโดยปกติจะรวม linker ไว้ด้วย 
คอมไพเลอร์ภาษา C ยังมีประโยชน์เพราะแพ็คเกจ Rust ทั่วไปบางอย่างต้องพึ่งพาโค้ดภาษา C และจะต้องใช้คอมไพเลอร์ภาษา C

บน macOS คุณสามารถรันคำสั่งต่อไปนี้เพื่อรับคอมไพเลอร์ภาษา C:

```console
$ xcode-select --install
```

ผู้ใช้ Linux ควรติดตั้ง GCC หรือ Clang ตามเอกสารประกอบของดิสทริบิวชันที่ใช้ 
ตัวอย่างเช่น หากคุณใช้ Ubuntu คุณสามารถติดตั้งแพ็คเกจ `build-essential`

### การติดตั้ง `rustup` บน Windows

บน Windows ให้ไปที่ [https://www.rust-lang.org/tools/install][install] และทำตามคำแนะนำสำหรับการติดตั้ง Rust 
ในขั้นตอนหนึ่งของการติดตั้ง คุณจะถูกขอให้ติดตั้ง Visual Studio ซึ่งจะให้ linker 
และไลบรารีเนทีฟที่จำเป็นสำหรับการคอมไพล์โปรแกรม 
หากคุณต้องการความช่วยเหลือเพิ่มเติมในขั้นตอนนี้ ดูที่ [https://rust-lang.github.io/rustup/installation/windows-msvc.html][msvc]

ส่วนที่เหลือของหนังสือเล่มนี้ใช้คำสั่งที่ทำงานได้ทั้งใน *cmd.exe* และ PowerShell 
หากมีความแตกต่างเฉพาะ เราจะอธิบายว่าควรใช้อันไหน

### การแก้ไขปัญหา

เพื่อตรวจสอบว่าคุณได้ติดตั้ง Rust อย่างถูกต้องหรือไม่ ให้เปิดเชลล์และป้อนบรรทัดนี้:

```console
$ rustc --version
```

คุณควรเห็นหมายเลขเวอร์ชัน, commit hash, และวันที่ commit สำหรับเวอร์ชันเสถียรล่าสุดที่ได้รับการเผยแพร่ ในรูปแบบต่อไปนี้:

```text
rustc x.y.z (abcabcabc yyyy-mm-dd)
```

หากคุณเห็นข้อมูลนี้ แสดงว่าคุณได้ติดตั้ง Rust สำเร็จแล้ว! 
หากคุณไม่เห็นข้อมูลนี้ ให้ตรวจสอบว่า Rust อยู่ในตัวแปรระบบ `%PATH%` ของคุณดังนี้

ใน Windows CMD ใช้:

```console
> echo %PATH%
```

ใน PowerShell ใช้:

```powershell
> echo $env:Path
```

ใน Linux และ macOS ใช้:

```console
$ echo $PATH
```

หากทั้งหมดถูกต้องและ Rust ยังไม่ทำงาน มีหลายที่ที่คุณสามารถขอความช่วยเหลือได้ 
ค้นหาวิธีติดต่อกับ Rustaceans คนอื่นๆ (ชื่อเล่นที่น่าขันที่เราเรียกตัวเอง) ได้ที่ [หน้าชุมชน][community]

### การอัปเดตและถอนการติดตั้ง

เมื่อติดตั้ง Rust ผ่าน `rustup` แล้ว การอัปเดตเป็นเวอร์ชันใหม่ที่เพิ่งเผยแพร่นั้นง่ายมาก จากเชลล์ของคุณ 
ให้รันสคริปต์อัปเดตต่อไปนี้:

```console
$ rustup update
```

เพื่อถอนการติดตั้ง Rust และ `rustup` ให้รันสคริปต์ถอนการติดตั้งต่อไปนี้จากเชลล์ของคุณ:

```console
$ rustup self uninstall
```

### คู่มือในเครื่อง

การติดตั้ง Rust ยังรวมถึงสำเนาของคู่มือในเครื่องด้วย 
เพื่อให้คุณสามารถอ่านได้แบบออฟไลน์ รัน `rustup doc` เพื่อเปิดคู่มือในเครื่องในเบราว์เซอร์ของคุณ

ทุกครั้งที่มีการให้ชนิดข้อมูลหรือฟังก์ชันโดยไลบรารีมาตรฐาน 
และคุณไม่แน่ใจว่ามันทำอะไรหรือใช้อย่างไร 
ให้ใช้คู่มือของ API (Application Programming Interface) เพื่อค้นหา!

[otherinstall]: https://forge.rust-lang.org/infra/other-installation-methods.html
[install]: https://www.rust-lang.org/tools/install
[msvc]: https://rust-lang.github.io/rustup/installation/windows-msvc.html
[community]: https://www.rust-lang.org/community
