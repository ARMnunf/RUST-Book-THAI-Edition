## สวัสดี, โลก!

ตอนนี้คุณได้ติดตั้ง Rust แล้ว ถึงเวลาเขียนโปรแกรม Rust แรกของคุณ 
เป็นธรรมเนียมปฏิบัติเมื่อเรียนรู้ภาษาใหม่ที่จะเขียนโปรแกรมเล็กๆ ที่ แสดงข้อความ `สวัสดี, โลก!` บนหน้าจอ 
ดังนั้นเราจะทำแบบเดียวกันที่นี่!

> หมายเหตุ: หนังสือเล่มนี้สันนิษฐานว่าคุณมีความคุ้นเคยพื้นฐานกับการใช้คำสั่งในเทอร์มินอล 
> Rust ไม่ได้มีข้อกำหนดเฉพาะเกี่ยวกับการแก้ไขหรือเครื่องมือหรือตำแหน่งที่โค้ดของคุณอยู่ 
> ดังนั้น หากคุณชอบใช้สภาพแวดล้อมการพัฒนาแบบรวม (IDE) แทนการใช้คำสั่งในเทอร์มินอล 
> คุณสามารถใช้ IDE ที่คุณชอบได้ ปัจจุบัน IDE หลายตัวมีการรองรับ Rust ในระดับหนึ่ง; 
> ตรวจสอบคู่มือของ IDE สำหรับรายละเอียด 
> ทีม Rust ได้มุ่งเน้นไปที่การเปิดใช้งานการสนับสนุน IDE ที่ยอดเยี่ยมผ่าน `rust-analyzer` 
> ดูที่ [ภาคผนวก D][devtools]<!-- ignore --> สำหรับรายละเอียดเพิ่มเติม

### การสร้างไดเร็กทอรีโปรเจค

คุณจะเริ่มต้นด้วยการสร้างไดเร็กทอรีเพื่อเก็บโค้ด Rust ของคุณ ไม่สำคัญ 
สำหรับ Rust ว่าโค้ดของคุณอยู่ที่ไหน แต่สำหรับแบบฝึกหัดและโปรเจคในหนังสือเล่มนี้ 
เราแนะนำให้สร้างไดเร็กทอรี *projects* ในไดเร็กทอรีหลักของคุณและเก็บโปรเจคทั้งหมดของคุณไว้ที่นั่น

เปิดเทอร์มินอลและป้อนคำสั่งต่อไปนี้เพื่อสร้างไดเร็กทอรี *projects* 
และไดเร็กทอรีสำหรับโปรเจค “สวัสดี, โลก!” ภายในไดเร็กทอรี *projects*

สำหรับ Linux, macOS, และ PowerShell บน Windows ให้ป้อนคำสั่งนี้:

```console
$ mkdir ~/projects
$ cd ~/projects
$ mkdir hello_world
$ cd hello_world
```

สำหรับ Windows CMD ให้ป้อนคำสั่งนี้:

```cmd
> mkdir "%USERPROFILE%\projects"
> cd /d "%USERPROFILE%\projects"
> mkdir hello_world
> cd hello_world
```

### การเขียนและการเรียกใช้โปรแกรม Rust

ต่อไป ให้สร้างไฟล์ซอร์สใหม่และตั้งชื่อว่า *main.rs* ไฟล์ Rust จะลงท้ายด้วย 
นามสกุล *.rs* เสมอ หากคุณใช้คำมากกว่าหนึ่งคำในชื่อไฟล์ของคุณ 
ธรรมเนียมปฏิบัติคือใช้ขีดล่างเพื่อแยกคำ 
ตัวอย่างเช่น ใช้ *hello_world.rs* แทนที่จะเป็น *helloworld.rs*

ตอนนี้เปิดไฟล์ *main.rs* ที่คุณเพิ่งสร้างและป้อนโค้ดในรายการ 1-1

<Listing number="1-1" file-name="main.rs" caption="A program that prints `Hello, world!`">

```rust
fn main() {
    println!("สวัสดี, โลก!");
}
```

</Listing>

บันทึกไฟล์และกลับไปที่หน้าต่างเทอร์มินอลของคุณใน 
ไดเร็กทอรี *~/projects/hello_world* บน Linux หรือ macOS ให้ป้อนคำสั่งต่อไปนี้ 
เพื่อคอมไพล์และเรียกใช้ไฟล์:

```console
$ rustc main.rs
$ ./main
สวัสดี, โลก!
```

บน Windows ให้ป้อนคำสั่ง `.\main.exe` แทน `./main`:

```powershell
> rustc main.rs
> .\main.exe
สวัสดี, โลก!
```

ไม่ว่าคุณจะใช้ระบบปฏิบัติการใด สตริง`สวัสดี, โลก!`ควรจะแสดงในเทอร์มินอล 
หากคุณไม่เห็นผลลัพธ์นี้ ให้กลับไปที่ 
ส่วน ["การแก้ไขปัญหา"][troubleshooting]<!-- ignore --> ของส่วนการติดตั้ง 
เพื่อดูวิธีรับความช่วยเหลือ

หาก `สวัสดี, โลก!` แสดงขึ้นมา ขอแสดงความยินดี! 
คุณได้เขียนโปรแกรม Rust อย่างเป็นทางการแล้ว 
นั่นทำให้คุณเป็นโปรแกรมเมอร์ Rust - ยินดีต้อนรับ!

### โครงสร้างของโปรแกรม Rust

มาดูรายละเอียดของโปรแกรม "สวัสดี, โลก!" นี้กัน 
นี่คือส่วนแรกของปริศนา:

```rust
fn main() {

}
```

บรรทัดเหล่านี้กำหนดฟังก์ชันที่ชื่อว่า `main` ฟังก์ชัน `main` เป็นฟังก์ชันพิเศษ: 
มันเป็นโค้ดส่วนแรกที่ทำงานในทุกโปรแกรมของ Rust 
ในบรรทัดแรกนี้ มีการประกาศฟังก์ชันที่ชื่อว่า `main` ที่ไม่มีพารามิเตอร์และไม่คืนค่าอะไร 
หากมีพารามิเตอร์ พารามิเตอร์จะอยู่ภายในวงเล็บ `()`

เนื้อหาของฟังก์ชันถูกห่อหุ้มด้วย `{}` Rust กำหนดให้ใช้วงเล็บปีกการอบเนื้อหาของฟังก์ชันทั้งหมด 
เป็นสไตล์ที่ดีที่จะวางวงเล็บปีกกาเปิดในบรรทัดเดียวกันกับการประกาศฟังก์ชัน 
โดยเว้นวรรคหนึ่งช่องระหว่างกัน

> หมายเหตุ: หากคุณต้องการยึดตามสไตล์มาตรฐานในโปรเจค Rust คุณสามารถ 
> ใช้เครื่องมือจัดรูปแบบอัตโนมัติที่เรียกว่า `rustfmt` เพื่อจัดรูปแบบโค้ดของคุณในสไตล์เฉพาะ 
> (อ่านเพิ่มเติมเกี่ยวกับ `rustfmt` ใน [ภาคผนวก D][devtools]<!-- ignore -->) 
> ทีม Rust ได้รวมเครื่องมือนี้ ไว้กับการแจกจ่าย Rust มาตรฐาน เช่นเดียวกับ `rustc` 
> ดังนั้นมันควรจะถูกติดตั้ง บนคอมพิวเตอร์ของคุณแล้ว!

เนื้อหาของฟังก์ชัน `main` มีโค้ดต่อไปนี้:

```rust
    println!("สวัสดี, โลก!");
```

บรรทัดนี้ทำงานทั้งหมดในโปรแกรมเล็กๆ นี้: มันแสดงข้อความบนหน้าจอ 
มีรายละเอียดสำคัญสี่ประการที่ต้องสังเกตที่นี่

ประการแรก สไตล์ของ Rust คือการเยื้องด้วยช่องว่างสี่ช่อง ไม่ใช่แท็บ

ประการที่สอง `println!` เรียกใช้แมโคร Rust 
หากมันเรียกใช้ฟังก์ชันแทน มันจะถูก ป้อนเป็น `println` (โดยไม่มี `!`) 
เราจะพูดถึงแมโคร Rust โดยละเอียดใน บทที่ 19 
ตอนนี้คุณเพียงแค่ต้องรู้ว่าการใช้ `!` หมายความว่าคุณกำลังเรียกใช้แมโคร 
แทนฟังก์ชันปกติและแมโครไม่ได้ปฏิบัติตามกฎเดียวกันกับฟังก์ชันเสมอไป

ประการที่สาม คุณเห็นสตริง `"สวัสดี, โลก!"` เราส่งสตริงนี้เป็นอาร์กิวเมนต์ 
ให้กับ `println!` และสตริงจะถูกแสดงบนหน้าจอ

ประการที่สี่ เราจบบรรทัดด้วยเซมิโคลอน (`;`) ซึ่งบ่งบอกว่านิพจน์นี้ 
สิ้นสุดแล้วและนิพจน์ถัดไปพร้อมที่จะเริ่มต้น 
บรรทัดส่วนใหญ่ของโค้ด Rust จบด้วยเซมิโคลอน

### การคอมไพล์และการเรียกใช้เป็นขั้นตอนแยกกัน

คุณเพิ่งเรียกใช้โปรแกรมที่สร้างขึ้นใหม่ ดังนั้นมาตรวจสอบแต่ละขั้นตอนในกระบวนการกัน

ก่อนที่จะเรียกใช้โปรแกรม Rust คุณต้องคอมไพล์มันโดยใช้คอมไพเลอร์ Rust 
โดยป้อนคำสั่ง `rustc` และส่งชื่อไฟล์ซอร์สของคุณ เช่นนี้:

```console
$ rustc main.rs
```

หากคุณมีพื้นฐานทาง C หรือ C++ คุณจะสังเกตเห็นว่านี่คล้ายกับ `gcc` หรือ `clang` 
หลังจากคอมไพล์สำเร็จ Rust จะสร้างไฟล์ไบนารีที่เรียกใช้งานได้

บน Linux, macOS, และ PowerShell บน Windows คุณสามารถดูไฟล์ที่เรียกใช้งานได้โดย 
ป้อนคำสั่ง `ls` ในเชลล์ของคุณ:

```console
$ ls
main  main.rs
```

บน Linux และ macOS คุณจะเห็นสองไฟล์ ใน PowerShell 
บน Windows คุณจะเห็นไฟล์เดียวกันสามไฟล์ที่คุณจะเห็นใน CMD 
ใน CMD บน Windows คุณจะป้อนคำสั่งดังนี้:

```cmd
> dir /B %= the /B option says to only show the file names =%
main.exe
main.pdb
main.rs
```

นี่แสดงไฟล์ซอร์สโค้ดที่มีนามสกุล *.rs* ไฟล์ที่เรียกใช้งานได้ (*main.exe* บน Windows แต่เป็น *main* บนแพลตฟอร์มอื่นๆ ทั้งหมด) 
และเมื่อใช้ Windows จะมีไฟล์ที่มีข้อมูลการดีบั๊กด้วยนามสกุล *.pdb* จากที่นี่ 
คุณสามารถเรียกใช้ไฟล์ *main* หรือ *main.exe* แบบนี้:

```console
$ ./main # or .\main.exe on Windows
```

หาก *main.rs* ของคุณเป็นโปรแกรม "สวัสดี, โลก!" 
บรรทัดนี้จะแสดง `สวัสดี, โลก!` บนเทอร์มินอลของคุณ

หากคุณคุ้นเคยกับภาษาแบบไดนามิกมากกว่า เช่น Ruby, Python หรือ JavaScript 
คุณอาจไม่คุ้นเคยกับการคอมไพล์และการเรียกใช้โปรแกรมเป็นขั้นตอนแยกกัน 
Rust เป็นภาษาที่ *คอมไพล์ล่วงหน้า* หมายความว่าคุณสามารถคอมไพล์โปรแกรมและให้ไฟล์ที่เรียกใช้งานได้แก่ผู้อื่น 
และพวกเขาสามารถเรียกใช้มันได้แม้ว่าจะไม่มี Rust ติดตั้งอยู่ 
หากคุณให้ไฟล์ *.rb*, *.py* หรือ *.js* แก่ใครสักคน พวกเขาต้องมี Ruby, Python หรือ JavaScript ติดตั้งอยู่ (ตามลำดับ) 
แต่ในภาษาเหล่านั้น คุณต้องใช้เพียงคำสั่งเดียว เพื่อคอมไพล์และเรียกใช้โปรแกรมของคุณ 
ทุกอย่างเป็นการแลกเปลี่ยนในการออกแบบภาษา

การคอมไพล์ด้วย `rustc` นั้นดีสำหรับโปรแกรมง่ายๆ 
แต่เมื่อโปรเจคของคุณเติบโตขึ้น คุณจะต้องจัดการตัวเลือกทั้งหมดและทำให้การแบ่งปันโค้ดของคุณง่ายขึ้น 
ต่อไปเราจะแนะนำคุณให้รู้จักเครื่องมือ Cargo ซึ่งจะช่วยคุณเขียนโปรแกรม Rust ในโลกแห่งความเป็นจริง

[troubleshooting]: ch01-01-installation.html#troubleshooting
[devtools]: appendix-04-useful-development-tools.html
