# บทนำ

> Note: This edition of the book is the same as [The Rust Programming
> Language][nsprust] available in print and ebook format from [No Starch
> Press][nsp].

[nsprust]: https://nostarch.com/rust-programming-language-2nd-edition
[nsp]: https://nostarch.com/

ยินดีต้อนรับสู่ *"The Rust Programming Language"* หนังสือแนะนำเกี่ยวกับภาษา Rust 
ภาษาโปรแกรมมิ่ง Rust ช่วยให้คุณเขียนซอฟต์แวร์ที่เร็วขึ้นและเชื่อถือได้มากขึ้น 
การออกแบบภาษาโปรแกรมมิ่งมักต้องแลกระหว่างการใช้งานที่ง่ายในระดับสูงกับการควบคุมในระดับต่ำ 
แต่ Rust ท้าทายความขัดแย้งนี้ ด้วยการสร้างสมดุลระหว่างความสามารถทางเทคนิคที่ทรงพลังและประสบการณ์การพัฒนาที่ยอดเยี่ยม
Rust ให้ตัวเลือกในการควบคุมรายละเอียดระดับต่ำ (เช่น การใช้หน่วยความจำ) โดยไม่มีความยุ่งยากที่มักเกี่ยวข้องกับการควบคุมเช่นนี้

## Rust เหมาะสำหรับใคร

Rust เหมาะสำหรับคนหลายกลุ่มด้วยเหตุผลที่หลากหลาย มาดูกลุ่มที่สำคัญที่สุดกัน:

### ทีมนักพัฒนา

Rust กำลังพิสูจน์ตัวเองว่าเป็นเครื่องมือที่มีประสิทธิภาพสำหรับการทำงานร่วมกันในทีมนักพัฒนาขนาดใหญ่
ที่มีความรู้ด้านการเขียนโปรแกรมระบบที่แตกต่างกัน โค้ดระดับล่างมักเกิดข้อผิดพลาดเล็กๆ น้อยๆ ที่ซับซ้อน 
ซึ่งในภาษาอื่นๆ ส่วนใหญ่จะตรวจพบได้เฉพาะผ่านการทดสอบอย่างละเอียดและการตรวจสอบโค้ดอย่างระมัดระวัง
โดยนักพัฒนาที่มีประสบการณ์ ใน Rust คอมไพเลอร์ทำหน้าที่เป็นผู้ควบคุมโดยปฏิเสธการคอมไพล์โค้ดที่มีข้อผิดพลาด
ที่ยากจะตรวจพบเหล่านี้ รวมถึงข้อผิดพลาดที่เกี่ยวกับการทำงานพร้อมกัน (concurrency) ด้วยการทำงานร่วมกับคอมไพเลอร์ 
ทีมสามารถใช้เวลาไปกับการโฟกัสที่ตรรกะของโปรแกรมแทนที่จะต้องไล่ล่าหาข้อผิดพลาด

Rust ยังนำเครื่องมือพัฒนาร่วมสมัยมาสู่โลกของการเขียนโปรแกรมระบบ:

* Cargo ตัวจัดการการพึ่งพา (dependency manager) และเครื่องมือสร้าง (build tool) ที่มาพร้อมกับ Rust 
  ช่วยให้การเพิ่ม คอมไพล์ และจัดการการพึ่งพาเป็นไปอย่างง่ายดายและสอดคล้องกันทั่วทั้งระบบนิเวศของ Rust
* เครื่องมือจัดรูปแบบ Rustfmt ช่วยให้มั่นใจว่ารูปแบบการเขียนโค้ดมีความสอดคล้องกันระหว่างนักพัฒนา
* rust-analyzer ขับเคลื่อนการผสานรวมกับ Integrated Development Environment (IDE) 
  สำหรับการเติมโค้ดอัตโนมัติและข้อความแจ้งข้อผิดพลาดแบบทันที

ด้วยการใช้เครื่องมือเหล่านี้และอื่นๆ ในระบบนิเวศของ Rust 
นักพัฒนาสามารถทำงานได้อย่างมีประสิทธิภาพในขณะที่เขียนโค้ดระดับระบบ

### นักเรียน

Rust เหมาะสำหรับนักเรียนและผู้ที่สนใจเรียนรู้เกี่ยวกับแนวคิดของระบบ 
หลายคนได้เรียนรู้หัวข้อต่างๆ เช่น การพัฒนาระบบปฏิบัติการผ่านการใช้ Rust 
ชุมชนมีความเป็นมิตรและยินดีที่จะตอบคำถามของนักเรียน 
ทีม Rust ต้องการทำให้แนวคิดเกี่ยวกับระบบเข้าถึงได้ง่ายขึ้นสำหรับคนจำนวนมากขึ้น 
โดยเฉพาะอย่างยิ่งผู้ที่เพิ่งเริ่มต้นการเขียนโปรแกรม ผ่านความพยายามต่างๆ เช่นหนังสือเล่มนี้

### บริษัท

บริษัทหลายร้อยแห่ง ทั้งขนาดใหญ่และเล็ก ใช้ Rust ในการผลิตสำหรับงานหลากหลายประเภท 
รวมถึงเครื่องมือคำสั่งในคอนโซล (command line tools) บริการเว็บ เครื่องมือ DevOps อุปกรณ์ฝังตัว 
การวิเคราะห์และแปลงรหัสเสียงและวิดีโอ สกุลเงินดิจิทัล ชีวสารสนเทศ เครื่องมือค้นหา 
แอปพลิเคชันอินเทอร์เน็ตของสรรพสิ่ง (IOT) การเรียนรู้ของเครื่อง (Machine Learning) 
และแม้แต่ส่วนสำคัญของเว็บเบราว์เซอร์ Firefox

### นักพัฒนาโอเพนซอร์ส

Rust เหมาะสำหรับผู้ที่ต้องการสร้างภาษาโปรแกรมมิ่ง Rust ชุมชน เครื่องมือสำหรับนักพัฒนา และไลบรารี 
เรายินดีที่จะให้คุณมีส่วนร่วมในการพัฒนาภาษา Rust

### ผู้ที่ให้คุณค่ากับความเร็วและความเสถียร

Rust เหมาะสำหรับผู้ที่ต้องการความเร็วและความเสถียรในภาษา เมื่อเราพูดถึงความเร็ว 
เราหมายถึงทั้งความเร็วในการทำงานของโค้ด Rust และความเร็วที่ Rust ช่วยให้คุณเขียนโปรแกรมได้ 
การตรวจสอบของคอมไพเลอร์ Rust ช่วยรับประกันความเสถียรผ่านการเพิ่มฟีเจอร์และการปรับโครงสร้างโค้ด 
ซึ่งแตกต่างจากโค้ดเก่าที่เปราะบางในภาษาที่ไม่มีการตรวจสอบเหล่านี้ ซึ่งนักพัฒนามักกลัวที่จะแก้ไข 
ด้วยความพยายามที่จะสร้างนามธรรมที่ไม่มีต้นทุน (zero-cost abstractions) 
คุณสมบัติระดับสูงที่คอมไพล์เป็นโค้ดระดับล่ำที่เร็วเท่ากับโค้ดที่เขียนด้วยมือ
 Rust มุ่งมั่นที่จะทำให้โค้ดที่ปลอดภัยเป็นโค้ดที่เร็วด้วย

ภาษา Rust หวังที่จะสนับสนุนผู้ใช้อื่นๆ อีกมากมาย ผู้ที่กล่าวถึงที่นี่เป็นเพียงผู้มีส่วนได้ส่วนเสียที่ใหญ่ที่สุดเท่านั้น 
โดยรวมแล้ว ความทะเยอทะยานที่ยิ่งใหญ่ที่สุดของ Rust คือการกำจัดการแลกเปลี่ยน (trade-offs) 
ที่โปรแกรมเมอร์ยอมรับมาเป็นทศวรรษ โดยมอบทั้งความปลอดภัย *และ* ผลิตภาพ ความเร็ว *และ* การใช้งานที่ง่าย 
ลองใช้ Rust ดูและดูว่าทางเลือกของมันเหมาะกับคุณหรือไม่

## หนังสือเล่มนี้เหมาะสำหรับใคร

หนังสือเล่มนี้สันนิษฐานว่าคุณเคยเขียนโค้ดในภาษาโปรแกรมมิ่งอื่นมาก่อน 
แต่ไม่ได้สันนิษฐานว่าเป็นภาษาใดโดยเฉพาะ เราพยายามทำให้เนื้อหาเข้าถึงได้กว้างๆ 
สำหรับผู้ที่มีพื้นฐานการเขียนโปรแกรมที่หลากหลาย เราไม่ได้ใช้เวลามากในการพูดถึงว่าการเขียนโปรแกรม *คืออะไร* 
หรือวิธีคิดเกี่ยวกับมัน หากคุณเพิ่งเริ่มต้นการเขียนโปรแกรมอย่างสิ้นเชิง 
คุณอาจได้ประโยชน์มากกว่าจากการอ่านหนังสือที่แนะนำการเขียนโปรแกรมโดยเฉพาะ

## วิธีใช้หนังสือนี้

โดยทั่วไป หนังสือเล่มนี้สันนิษฐานว่าคุณกำลังอ่านตามลำดับจากหน้าแรกถึงหน้าสุดท้าย 
บทหลังๆ จะต่อยอดจากแนวคิดในบทก่อนหน้า และบทก่อนหน้าอาจไม่ลงลึกในรายละเอียดของหัวข้อใดหัวข้อหนึ่ง 
แต่จะกลับมาพูดถึงหัวข้อนั้นในบทต่อๆ ไป

คุณจะพบบทสองประเภทในหนังสือเล่มนี้: บทเกี่ยวกับแนวคิด และบทเกี่ยวกับโปรเจค 
ในบทเกี่ยวกับแนวคิด คุณจะเรียนรู้เกี่ยวกับแง่มุมต่างๆ ของ Rust 
ในบทเกี่ยวกับโปรเจค เราจะสร้างโปรแกรมขนาดเล็กด้วยกัน 
โดยนำสิ่งที่คุณได้เรียนรู้มาใช้ บทที่ 2, 12 และ 20 เป็นบทเกี่ยวกับโปรเจค 
ส่วนบทที่เหลือเป็นบทเกี่ยวกับแนวคิด

บทที่ 1 อธิบายวิธีติดตั้ง Rust วิธีเขียนโปรแกรม "Hello, world!" และวิธีใช้ Cargo ซึ่งเป็นตัวจัดการแพ็คเกจและเครื่องมือสร้างของ Rust 
บทที่ 2 เป็นการแนะนำภาคปฏิบัติในการเขียนโปรแกรมใน Rust โดยให้คุณสร้างเกมทายตัวเลข ที่นี่เราจะครอบคลุมแนวคิดในระดับสูง และบทต่อๆ ไปจะให้รายละเอียดเพิ่มเติม หากคุณต้องการลงมือปฏิบัติทันที บทที่ 2 คือที่ที่เหมาะสำหรับเรื่องนั้น 
บทที่ 3 ครอบคลุมคุณสมบัติของ Rust ที่คล้ายกับภาษาโปรแกรมมิ่งอื่นๆ 
และในบทที่ 4 คุณจะเรียนรู้เกี่ยวกับระบบความเป็นเจ้าของ (ownership system) ของ Rust 
หากคุณเป็นผู้เรียนที่พิถีพิถันเป็นพิเศษซึ่งชอบเรียนรู้ทุกรายละเอียดก่อนที่จะก้าวต่อไป 
คุณอาจต้องการข้ามบทที่ 2 และไปที่บทที่ 3 โดยตรง แล้วกลับมาที่บทที่ 2 
เมื่อคุณต้องการทำงานกับโปรเจคที่ใช้รายละเอียดที่คุณได้เรียนรู้

บทที่ 5 พูดถึงโครงสร้าง (structs) และเมธอด และบทที่ 6 ครอบคลุม enums, นิพจน์ `match` 
และโครงสร้างควบคุมการไหล `if let` คุณจะใช้โครงสร้างและ enums เพื่อสร้างประเภทข้อมูลที่กำหนดเองใน Rust

ในบทที่ 7 คุณจะเรียนรู้เกี่ยวกับระบบโมดูลของ Rust และกฎความเป็นส่วนตัวสำหรับการจัดระเบียบโค้ดของคุณและ 
Application Programming Interface (API) สาธารณะ 
บทที่ 8 อภิปรายเกี่ยวกับโครงสร้างข้อมูลคอลเลกชันทั่วไปบางอย่างที่ไลบรารีมาตรฐานให้มา เช่น เวกเตอร์ สตริง และแฮชแมป 
บทที่ 9 สำรวจปรัชญาและเทคนิคการจัดการข้อผิดพลาดของ Rust

บทที่ 10 ลงลึกเกี่ยวกับ generics, traits และ lifetimes ซึ่งให้พลังแก่คุณในการกำหนดโค้ดที่ใช้ได้กับหลายประเภทข้อมูล 
บทที่ 11 เกี่ยวกับการทดสอบทั้งหมด ซึ่งแม้จะมีการรับประกันความปลอดภัยของ Rust ก็ยังจำเป็นเพื่อให้แน่ใจว่าตรรกะของโปรแกรมของคุณถูกต้อง 
ในบทที่ 12 เราจะสร้างการใช้งานของเราเองสำหรับฟังก์ชันการทำงานบางส่วนของเครื่องมือคำสั่ง `grep` 
ที่ค้นหาข้อความภายในไฟล์ สำหรับเรื่องนี้ เราจะใช้แนวคิดหลายอย่างที่เราได้อภิปรายในบทก่อนหน้านี้

บทที่ 13 สำรวจ closures และ iterators: คุณสมบัติของ Rust ที่มาจากภาษาโปรแกรมเชิงฟังก์ชัน 
ในบทที่ 14 เราจะตรวจสอบ Cargo อย่างละเอียดมากขึ้นและพูดถึงแนวปฏิบัติที่ดีที่สุดสำหรับการแบ่งปันไลบรารีของคุณกับผู้อื่น 
บทที่ 15 อภิปรายเกี่ยวกับ smart pointers ที่ไลบรารีมาตรฐานให้มาและ traits ที่ช่วยให้ฟังก์ชันการทำงานของมันเป็นไปได้

ในบทที่ 16 เราจะเดินผ่านโมเดลต่างๆ ของการเขียนโปรแกรมแบบพร้อมกัน (concurrent programming) 
และพูดถึงวิธีที่ Rust ช่วยให้คุณเขียนโปรแกรมในหลาย thread โดยไม่ต้องกลัว 
บทที่ 17 ดูว่าสำนวนของ Rust เปรียบเทียบกับหลักการเขียนโปรแกรมเชิงวัตถุที่คุณอาจคุ้นเคยอย่างไร

บทที่ 18 เป็นการอ้างอิงเกี่ยวกับรูปแบบ (patterns) และการจับคู่รูปแบบ (pattern matching) 
ซึ่งเป็นวิธีที่ทรงพลังในการแสดงแนวคิดตลอดโปรแกรม Rust 
บทที่ 19 ประกอบด้วยหัวข้อขั้นสูงที่น่าสนใจหลากหลาย รวมถึง unsafe Rust, macros 
และอื่นๆ เกี่ยวกับ lifetimes, traits, ประเภทข้อมูล, ฟังก์ชัน และ closures

ในบทที่ 20 เราจะทำโปรเจคให้เสร็จสมบูรณ์โดยการสร้าง web server แบบ multithreaded ในระดับต่ำ!

ท้ายที่สุด ภาคผนวกบางส่วนมีข้อมูลที่เป็นประโยชน์เกี่ยวกับภาษาในรูปแบบที่คล้ายกับการอ้างอิงมากขึ้น 
ภาคผนวก A ครอบคลุมคำสำคัญของ Rust 
ภาคผนวก B ครอบคลุมตัวดำเนินการและสัญลักษณ์ของ Rust 
ภาคผนวก C ครอบคลุม traits ที่สามารถสืบทอดได้ซึ่งให้มาโดยไลบรารีมาตรฐาน 
ภาคผนวก D ครอบคลุมเครื่องมือพัฒนาที่มีประโยชน์บางอย่าง 
และภาคผนวก E อธิบายเกี่ยวกับ Rust editions 
ในภาคผนวก F คุณสามารถหาการแปลของหนังสือได้ 
และในภาคผนวก G เราจะครอบคลุมวิธีการสร้าง Rust และ nightly Rust คืออะไร

ไม่มีวิธีที่ผิดในการอ่านหนังสือเล่มนี้: ถ้าคุณต้องการข้ามไปข้างหน้า ก็ทำได้เลย! 
คุณอาจต้องกลับไปยังบทก่อนหน้าถ้าคุณพบความสับสน แต่ทำสิ่งที่เหมาะกับคุณ

<span id="ferris"></span>

ส่วนสำคัญของกระบวนการเรียนรู้ Rust คือการเรียนรู้วิธีอ่านข้อความแสดงข้อผิดพลาดที่คอมไพเลอร์แสดง: 
สิ่งเหล่านี้จะนำทางคุณสู่โค้ดที่ทำงานได้  ดังนั้น เราจะให้ตัวอย่างมากมายที่ไม่สามารถคอมไพล์ได้พร้อมกับข้อความแสดงข้อผิดพลาด
ที่คอมไพเลอร์จะแสดงให้คุณเห็นในแต่ละสถานการณ์ โปรดทราบว่าถ้าคุณป้อนและรันตัวอย่างแบบสุ่ม มันอาจไม่สามารถคอมไพล์ได้! ตรวจสอบให้แน่ใจว่าคุณอ่านข้อความรอบๆ เพื่อดูว่าตัวอย่างที่คุณกำลังพยายามรันนั้นมีจุดประสงค์ที่จะแสดงข้อผิดพลาดหรือไม่ Ferris จะช่วยคุณแยกแยะโค้ดที่ไม่ได้มีจุดประสงค์ให้ทำงานด้วย:

| Ferris                                                       | Meaning                   |
| ------------------------------------------------------------ | ------------------------- |
| <img src="img/ferris/does_not_compile.svg" class="ferris-explain" alt="Ferris with a question mark"/> | โค้ดนี้ไม่สามารถคอมไพล์ได้!     |
| <img src="img/ferris/panics.svg" class="ferris-explain" alt="Ferris throwing up their hands"/> | โค้ดนี้เกิด panic!            |
| <img src="img/ferris/not_desired_behavior.svg" class="ferris-explain" alt="Ferris with one claw up, shrugging"/> | โค้ดนี้ไม่ได้ให้ผลลัพธ์ตามที่ต้องการ |

ในสถานการณ์ส่วนใหญ่ เราจะนำคุณไปสู่เวอร์ชันที่ถูกต้องของโค้ดใดๆ ที่ไม่สามารถคอมไพล์ได้

## ซอร์สโค้ด

ไฟล์ซอร์สที่ใช้สร้างหนังสือเล่มนี้สามารถพบได้บน [GitHub][book].

[book]: https://github.com/rust-lang/book/tree/main/src
